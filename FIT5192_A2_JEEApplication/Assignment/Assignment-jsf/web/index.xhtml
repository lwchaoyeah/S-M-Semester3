<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <h:outputStylesheet name="css/headlayout.css"/>
    </h:head>
    <h:body>
        <ui:insert name="header" >
            <ui:include src="/header.xhtml" />
        </ui:insert> 
        <div id="header">
            <h1>Book Shop</h1>
        </div>
        
        <h:form>
            <table border = "1" align="center" width = "60%">
                <tr>
                    <td>author:</td>
                    <td><h:inputText value="#{productBean.author}" id="author" /></td>
                </tr>
                <tr>
                    <td>shortTitle:</td>
                    <td><h:inputText value="#{productBean.shortTitle}" id = "shortTitle"/></td>
                </tr>
                <tr>
                    <td>price:</td>
                    <td><h:inputText value="#{productBean.price}" id="price" /></td>
                </tr>
                <tr>
                    <td>category:</td>
                    <td><h:inputText value="#{productBean.category}" id = "type"/></td>
                </tr>
                <tr>
                    <td>rating:</td>
                    <td><h:inputText value="#{productBean.rating}"  id = "rating"/></td>
                    
                </tr>
                <tr>
                    <td>publish_house:</td>
                    <td><h:inputText value="#{productBean.publish_house}"  id = "publish_house"/></td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <h:commandButton value="search/recommend" action="#{productController.searchProductFromHomePage(productBean,userBean)}" />
                    </td>
                </tr>
            </table>
        </h:form>
        
        <table  border="1" align="center" width = "80%">
            <tr>
                <th>Book name</th>
                <th>author</th>
                <th>category</th>
                <th>rating</th>
                <th>price</th>
                <th>publish house</th>
                <th><h:link value="My shopping Cart" outcome="/transaction/shoppingCart"/></th>
            </tr>
            <ui:repeat value="#{productController.products}" var="product" varStatus="product_status">
            <tr>    
                <td>#{product.shortTitle}</td>
                <td>#{product.author}</td>
                <td>#{product.category}</td>
                <th>#{product.rating}</th>
                <td>#{product.price}</td>
                <td>#{product.publish_house}</td>
                <td>
                    <h:link value="add to shopping cart" outcome="/product/productInfo">
                    <!--
                        This param is adding a GET variable index to associate a movie id with hyperlink.
                    -->
                    <f:param name="productId" value="#{product.productId}"></f:param>	
                    </h:link>
                </td>
            </tr>
            </ui:repeat>
        </table>
         
    </h:body>
</html>

